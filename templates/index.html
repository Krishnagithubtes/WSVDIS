<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vulnerability Scanner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background-color: #f0f4f8;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
        }
        h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        form {
            background-color: #ffffff;
            padding: 22px 28px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
            min-width: 220px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"] {
            width: 100%;
            max-width: 300px;
            padding: 8px;
            margin-bottom: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 15px;
        }
        button {
            padding: 8px 16px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .scanner-modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.18);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .scanner-box {
            background: #fff;
            padding: 18px 28px;
            border-radius: 10px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.13);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
            min-height: 120px;
        }
        .scanner-logo {
            width: 38px;
            height: 38px;
            margin-bottom: 10px;
            animation: spin 1.2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
        .wait-text {
            font-size: 15px;
            color: #232946;
            margin-bottom: 6px;
        }
        .timer {
            font-size: 14px;
            color: #555;
        }
        .history-dropdown {
            position: fixed;
            top: 60px;
            left: 70px;
            background: #232946;
            color: #fff;
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: none;
            z-index: 1300;
            min-width: 200px;
            max-height: 300px;
            overflow-y: auto;
        }
        .history-item {
            padding: 6px 8px;
            margin: 2px 0;
            background: #353a5a;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            word-break: break-all;
        }
        .history-item:hover {
            background: #4f5d7a;
        }
        .profile-modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1400;
        }
        .profile-box {
            background: #fff;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.2);
            min-width: 300px;
        }
        .profile-box h3 {
            margin-top: 0;
            color: #232946;
        }
        .profile-box input {
            width: 100%;
            padding: 8px;
            margin-bottom: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .profile-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ddd;
            margin: 0 auto 10px;
            display: block;
        }
        .image-upload {
            text-align: center;
            margin-bottom: 15px;
        }
        .results-modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1400;
        }
        .results-box {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.2);
            min-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .vuln-item {
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        .vuln-high { background: #ffebee; border-left: 4px solid #f44336; }
        .vuln-medium { background: #fff3e0; border-left: 4px solid #ff9800; }
        .vuln-low { background: #e8f5e8; border-left: 4px solid #4caf50; }
        .chart-bar {
            height: 20px;
            margin: 5px 0;
            border-radius: 3px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            color: white;
            font-size: 0.8rem;
        }
        /* Dark theme styles */
        body.dark-theme {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        body.dark-theme .main-content h2 {
            color: #e0e0e0;
        }
        body.dark-theme form {
            background-color: #2d2d2d;
            color: #e0e0e0;
        }
        body.dark-theme label {
            color: #e0e0e0;
        }
        body.dark-theme input[type="text"] {
            background-color: #3d3d3d;
            color: #e0e0e0;
            border-color: #555;
        }
        body.dark-theme .history-dropdown {
            background: #2d2d2d;
        }
        body.dark-theme .history-item {
            background: #3d3d3d;
        }
        body.dark-theme .history-item:hover {
            background: #4d4d4d;
        }
        body.dark-theme .profile-box {
            background: #2d2d2d;
            color: #e0e0e0;
        }
        body.dark-theme .profile-box h3 {
            color: #e0e0e0;
        }
        body.dark-theme .profile-box input {
            background-color: #3d3d3d;
            color: #e0e0e0;
            border-color: #555;
        }
        body.dark-theme .results-box {
            background: #2d2d2d;
            color: #e0e0e0;
        }
        body.dark-theme .vuln-high {
            background: #4a1a1a;
            color: #ffcdd2;
        }
        body.dark-theme .vuln-medium {
            background: #4a3a1a;
            color: #ffe0b2;
        }
        body.dark-theme .vuln-low {
            background: #1a4a1a;
            color: #c8e6c9;
        }
        .mobile-view {
            max-width: 375px;
            margin: 0 auto;
            border: 2px solid #ddd;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            position: relative;
        }
        .mobile-view .icon-bar {
            width: 100% !important;
            height: 50px !important;
            position: absolute !important;
            bottom: 0 !important;
            top: auto !important;
            left: 0 !important;
            flex-direction: row !important;
            justify-content: space-around !important;
            border-radius: 0 0 18px 18px !important;
        }
        .mobile-view .icon-bar button {
            margin: 5px 2px !important;
            padding: 4px !important;
            width: 35px !important;
            height: 35px !important;
        }
        .mobile-view .icon-bar button svg {
            width: 18px !important;
            height: 18px !important;
        }
        .mobile-view .main-content {
            margin-left: 0 !important;
            padding: 15px 15px 60px 15px !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }
        .mobile-view .main-content h2 {
            font-size: 1.1rem !important;
            margin-bottom: 15px !important;
        }
        .mobile-view .main-content form {
            padding: 15px !important;
            min-width: auto !important;
        }
        .mobile-view .main-content input[type="text"] {
            font-size: 14px !important;
            padding: 6px !important;
        }
        .mobile-view .main-content button {
            font-size: 14px !important;
            padding: 6px 12px !important;
        }
        .mobile-view .history-dropdown {
            bottom: 60px !important;
            left: 10px !important;
            right: 10px !important;
            width: auto !important;
            max-width: none !important;
        }
        .mobile-view .profile-modal .profile-box,
        .mobile-view .results-modal .results-box {
            width: 90% !important;
            min-width: auto !important;
            margin: 10px !important;
            max-height: 70vh !important;
        }
        .mobile-view .view-indicator {
            top: 5px !important;
            right: 5px !important;
            font-size: 10px !important;
            padding: 2px 6px !important;
        }
        .view-indicator {
            position: fixed;
            top: 10px;
            right: 70px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            z-index: 1500;
        }
        @media (max-width: 700px) {
            .main-content {
                padding: 6px;
            }
            form {
                padding: 10px 4px;
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Icon bar (editable) -->
    <nav class="icon-bar" style="position:fixed;top:0;left:0;width:54px;height:100vh;background:#232946;display:flex;flex-direction:column;align-items:center;z-index:1200;box-shadow:2px 0 8px rgba(0,0,0,0.07);">
        <button title="Home" style="background:linear-gradient(135deg,#28a745,#1e7e34);border:none;margin:18px 0;cursor:pointer;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(40,167,69,0.3);transition:all 0.3s ease;" onclick="showProfile()" onmouseover="this.style.transform='scale(1.1)';this.style.boxShadow='0 4px 12px rgba(40,167,69,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 2px 8px rgba(40,167,69,0.3)'">
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path d="M3 12L12 4l9 8" stroke="#fff" stroke-width="2"/><rect x="6" y="12" width="12" height="8" rx="2" stroke="#fff" stroke-width="2"/></svg>
        </button>
        <button title="History" style="background:linear-gradient(135deg,#ffc107,#e0a800);border:none;margin:18px 0;cursor:pointer;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(255,193,7,0.3);transition:all 0.3s ease;" onclick="toggleHistory()" onmouseover="this.style.transform='scale(1.1)';this.style.boxShadow='0 4px 12px rgba(255,193,7,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 2px 8px rgba(255,193,7,0.3)'">
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="2"/><path d="M12 6v6l4 2" stroke="#fff" stroke-width="2"/></svg>
        </button>
        
        <button title="Results" style="background:linear-gradient(135deg,#007BFF,#0056b3);border:none;margin:18px 0;cursor:pointer;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(0,123,255,0.3);transition:all 0.3s ease;" onclick="showResults()" onmouseover="this.style.transform='scale(1.1)';this.style.boxShadow='0 4px 12px rgba(0,123,255,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 2px 8px rgba(0,123,255,0.3)'">
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path d="M3 3v18h18" stroke="#fff" stroke-width="2"/><path d="M18 17l-5-5-4 4-4-4" stroke="#fff" stroke-width="2"/><circle cx="9" cy="12" r="1" fill="#fff"/><circle cx="14" cy="7" r="1" fill="#fff"/><circle cx="18" cy="17" r="1" fill="#fff"/></svg>
        </button>
        <button title="Settings" style="background:linear-gradient(135deg,#6c757d,#495057);border:none;margin:18px 0;cursor:pointer;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(108,117,125,0.3);transition:all 0.3s ease;" onclick="showSettings()" onmouseover="this.style.transform='scale(1.1)';this.style.boxShadow='0 4px 12px rgba(108,117,125,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 2px 8px rgba(108,117,125,0.3)'">
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" stroke="#fff" stroke-width="2"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="#fff" stroke-width="2"/></svg>
        </button>
                <button title="Toggle View" id="viewToggle" style="background:linear-gradient(135deg,#17a2b8,#138496);border:none;margin:18px 0;cursor:pointer;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(23,162,184,0.3);transition:all 0.3s ease;" onclick="toggleView()" onmouseover="this.style.transform='scale(1.1)';this.style.boxShadow='0 4px 12px rgba(23,162,184,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 2px 8px rgba(23,162,184,0.3)'">
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><rect x="2" y="4" width="20" height="16" rx="2" stroke="#fff" stroke-width="2"/><rect x="6" y="8" width="12" height="8" rx="1" stroke="#fff" stroke-width="2"/></svg>
        </button>
        <button title="Logout" style="background:linear-gradient(135deg,#dc3545,#c82333);border:none;margin:18px 0;cursor:pointer;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(220,53,69,0.3);transition:all 0.3s ease;" onclick="window.location.href='/logout'" onmouseover="this.style.transform='scale(1.1)';this.style.boxShadow='0 4px 12px rgba(220,53,69,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 2px 8px rgba(220,53,69,0.3)''>
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" stroke="#fff" stroke-width="2"/><polyline points="16,17 21,12 16,7" stroke="#fff" stroke-width="2"/><line x1="21" y1="12" x2="9" y2="12" stroke="#fff" stroke-width="2"/></svg>
        </button>
    </nav>

    <div id="historyDropdown" class="history-dropdown">
        <div style="font-weight:bold;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;">
            Search History
            <button onclick="clearAllHistory()" style="background:#dc3545;color:#fff;border:none;border-radius:3px;padding:2px 6px;font-size:0.7rem;cursor:pointer;">Clear All</button>
        </div>
        <div id="historyList"></div>
    </div>

    <div id="profileModal" class="profile-modal" style="display:none;">
        <div class="profile-box">
            <!-- Edit Mode -->
            <div id="editMode">
                <h3>Create Your Profile</h3>
                <div class="image-upload">
                    <img id="profileImage" class="profile-image" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 24 24' fill='%23ddd'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E" alt="Profile">
                    <input type="file" id="imageInput" accept="image/*" style="display:none;" onchange="loadImage()">
                    <button type="button" onclick="document.getElementById('imageInput').click()" style="background:#28a745;padding:4px 8px;font-size:0.8rem;">Add Photo</button>
                </div>
                <input type="text" id="userName" placeholder="Full Name" />
                <input type="tel" id="userPhone" placeholder="Phone Number" />
                <input type="email" id="userEmail" placeholder="Email Address" />
                <input type="text" id="userCompany" placeholder="Company/Organization" />
                <div style="display:flex;gap:10px;margin-top:15px;">
                    <button onclick="saveProfile()" style="flex:1;">Save</button>
                    <button onclick="closeProfile()" style="flex:1;background:#6c757d;">Cancel</button>
                </div>
            </div>
            <!-- View Mode -->
            <div id="viewMode" style="display:none;">
                <h3>Profile Details</h3>
                <div style="text-align:center;margin-bottom:15px;">
                    <img id="viewProfileImage" class="profile-image" alt="Profile">
                </div>
                <div style="margin-bottom:10px;"><strong>Name:</strong> <span id="viewName"></span></div>
                <div style="margin-bottom:10px;"><strong>Phone:</strong> <span id="viewPhone"></span></div>
                <div style="margin-bottom:10px;"><strong>Email:</strong> <span id="viewEmail"></span></div>
                <div style="margin-bottom:15px;"><strong>Company:</strong> <span id="viewCompany"></span></div>
                <div style="display:flex;gap:10px;">
                    <button onclick="editProfile()" style="flex:1;background:#28a745;">Edit</button>
                    <button onclick="closeProfile()" style="flex:1;background:#6c757d;">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="resultsModal" class="results-modal" style="display:none;">
        <div class="results-box">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                <h3 style="margin:0;">Scan Results</h3>
                <button onclick="clearAllResults()" style="background:#dc3545;color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:0.8rem;cursor:pointer;">Clear All</button>
            </div>
            <div id="resultsContent">
                <div style="color:#aaa;text-align:center;">No scan results available</div>
            </div>
            <button onclick="closeResults()" style="margin-top:15px;background:#6c757d;width:100%;">Close</button>
        </div>
    </div>

    <div id="settingsModal" class="profile-modal" style="display:none;">
        <div class="profile-box">
            <h3>Settings</h3>
            <div style="margin-bottom:15px;">
                <label style="display:block;margin-bottom:5px;font-weight:bold;">Theme</label>
                <select id="themeSelect" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
                    <option value="light">Light Theme</option>
                    <option value="dark">Dark Theme</option>
                </select>
            </div>
            <div style="margin-bottom:15px;">
                <label style="display:flex;align-items:center;gap:8px;">
                    <input type="checkbox" id="notificationsCheck" style="margin:0;">
                    <span>Enable Notifications</span>
                </label>
            </div>
            <div style="margin-bottom:15px;">
                <label style="display:flex;align-items:center;gap:8px;">
                    <input type="checkbox" id="autoSaveCheck" style="margin:0;">
                    <span>Auto-save Scan Results</span>
                </label>
            </div>
            <div style="margin-bottom:15px;">
                <label style="display:block;margin-bottom:5px;font-weight:bold;">Max History Items</label>
                <input type="number" id="maxHistoryInput" min="5" max="50" value="10" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;">
            </div>
            <div style="border-top:1px solid #ddd;padding-top:15px;margin-top:15px;">
                <button onclick="showExportOptions()" style="width:100%;margin-bottom:8px;background:#17a2b8;">↓ Export Data</button>
                <button onclick="clearAllData()" style="width:100%;background:#dc3545;">Clear All Data</button>
            </div>
            <div style="display:flex;gap:10px;margin-top:15px;">
                <button onclick="saveSettings()" style="flex:1;">Save</button>
                <button onclick="closeSettings()" style="flex:1;background:#6c757d;">Cancel</button>
            </div>
        </div>
    </div>

    <div id="exportModal" class="profile-modal" style="display:none;">
        <div class="profile-box">
            <h3>📊 Export Data</h3>
            <p style="color:#666;font-size:0.9rem;margin-bottom:20px;">Select what data to include in your export:</p>
            
            <div style="margin-bottom:15px;">
                <label style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                    <input type="checkbox" id="exportHistory" checked style="margin:0;">
                    <span>📋 Search History</span>
                </label>
                <label style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                    <input type="checkbox" id="exportResults" checked style="margin:0;">
                    <span>🔍 Scan Results</span>
                </label>
                <label style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                    <input type="checkbox" id="exportProfile" style="margin:0;">
                    <span>👤 Profile Information</span>
                </label>
                <label style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                    <input type="checkbox" id="exportSettings" style="margin:0;">
                    <span>⚙️ App Settings</span>
                </label>
            </div>
            
            <div style="background:#f8f9fa;padding:12px;border-radius:6px;margin-bottom:15px;font-size:0.85rem;color:#666;">
                <strong>📋 Export Format:</strong> HTML Report with charts and formatted data<br>
                <strong>🔒 Privacy:</strong> Data stays on your device - nothing is uploaded
            </div>
            
            <div style="display:flex;gap:10px;">
                <button onclick="confirmExport()" style="flex:1;background:#17a2b8;">Export Selected</button>
                <button onclick="closeExportModal()" style="flex:1;background:#6c757d;">Cancel</button>
            </div>
            <div style="margin-top:10px;font-size:0.8rem;color:#666;text-align:center;">💡 Tip: Use History/Results panels to select specific items to export</div>
        </div>
    </div>

    <div class="main-content">
        <h2>🔍 Simple Web Vulnerability Scanner</h2>
        <form id="scanForm" action="/scan" method="post" autocomplete="off">
            <label for="url">Enter Website URL:</label>
            <input type="text" id="url" name="url" placeholder="https://example.com" required>
            <button type="submit">
                <svg width="16" height="16" fill="none" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8" stroke="#fff" stroke-width="2"/>
                    <line x1="17" y1="17" x2="22" y2="22" stroke="#fff" stroke-width="2"/>
                </svg>
                Scan
            </button>
        </form>
    </div>
    <div id="scannerModal" class="scanner-modal" style="display:none;">
        <div class="scanner-box">
            <svg class="scanner-logo" viewBox="0 0 64 64" fill="none">
                <circle cx="32" cy="32" r="28" stroke="#007BFF" stroke-width="6"/>
                <path d="M32 18v14l10 6" stroke="#007BFF" stroke-width="6" stroke-linecap="round"/>
            </svg>
            <div class="wait-text">Scanning... Please wait</div>
            <div class="timer" id="scanTimer">0s</div>
        </div>
    </div>
    <script>
        // Profile management
        function showProfile() {
            const profile = JSON.parse(localStorage.getItem('userProfile') || '{}');
            
            if (profile.name) {
                // Show view mode if profile exists
                document.getElementById('viewName').textContent = profile.name || 'Not set';
                document.getElementById('viewPhone').textContent = profile.phone || 'Not set';
                document.getElementById('viewEmail').textContent = profile.email || 'Not set';
                document.getElementById('viewCompany').textContent = profile.company || 'Not set';
                document.getElementById('viewProfileImage').src = profile.image || document.getElementById('profileImage').src;
                document.getElementById('editMode').style.display = 'none';
                document.getElementById('viewMode').style.display = 'block';
            } else {
                // Show edit mode for new profile
                document.getElementById('editMode').style.display = 'block';
                document.getElementById('viewMode').style.display = 'none';
            }
            
            document.getElementById('userName').value = profile.name || '';
            document.getElementById('userPhone').value = profile.phone || '';
            document.getElementById('userEmail').value = profile.email || '';
            document.getElementById('userCompany').value = profile.company || '';
            if (profile.image) {
                document.getElementById('profileImage').src = profile.image;
            }
            document.getElementById('profileModal').style.display = 'flex';
        }

        function editProfile() {
            document.getElementById('editMode').style.display = 'block';
            document.getElementById('viewMode').style.display = 'none';
        }

        function loadImage() {
            const input = document.getElementById('imageInput');
            const img = document.getElementById('profileImage');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.src = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function saveProfile() {
            const profile = {
                name: document.getElementById('userName').value,
                phone: document.getElementById('userPhone').value,
                email: document.getElementById('userEmail').value,
                company: document.getElementById('userCompany').value,
                image: document.getElementById('profileImage').src
            };
            localStorage.setItem('userProfile', JSON.stringify(profile));
            
            // Switch to view mode after saving
            document.getElementById('viewName').textContent = profile.name || 'Not set';
            document.getElementById('viewPhone').textContent = profile.phone || 'Not set';
            document.getElementById('viewEmail').textContent = profile.email || 'Not set';
            document.getElementById('viewCompany').textContent = profile.company || 'Not set';
            document.getElementById('viewProfileImage').src = profile.image;
            document.getElementById('editMode').style.display = 'none';
            document.getElementById('viewMode').style.display = 'block';
        }

        function closeProfile() {
            document.getElementById('profileModal').style.display = 'none';
        }

        // Settings management
        function showSettings() {
            const settings = JSON.parse(localStorage.getItem('appSettings') || '{}');
            document.getElementById('themeSelect').value = settings.theme || 'light';
            document.getElementById('notificationsCheck').checked = settings.notifications !== false;
            document.getElementById('autoSaveCheck').checked = settings.autoSave !== false;
            document.getElementById('maxHistoryInput').value = settings.maxHistory || 10;
            document.getElementById('settingsModal').style.display = 'flex';
        }

        function saveSettings() {
            const settings = {
                theme: document.getElementById('themeSelect').value,
                notifications: document.getElementById('notificationsCheck').checked,
                autoSave: document.getElementById('autoSaveCheck').checked,
                maxHistory: parseInt(document.getElementById('maxHistoryInput').value)
            };
            localStorage.setItem('appSettings', JSON.stringify(settings));
            applyTheme(settings.theme);
            closeSettings();
        }

        function applyTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-theme');
            } else {
                document.body.classList.remove('dark-theme');
            }
        }

        // Apply saved theme on page load
        window.addEventListener('DOMContentLoaded', function() {
            const settings = JSON.parse(localStorage.getItem('appSettings') || '{}');
            applyTheme(settings.theme || 'light');
        });

        function closeSettings() {
            document.getElementById('settingsModal').style.display = 'none';
        }

        function showExportOptions() {
            // Update counts in modal
            const historyCount = JSON.parse(localStorage.getItem('scanHistory') || '[]').length;
            const resultsCount = JSON.parse(localStorage.getItem('scanResults') || '[]').length;
            document.querySelector('.profile-box div:last-of-type').innerHTML = `ℹ️ Search History (${historyCount} items) and Scan Results (${resultsCount} scans) will always be included`;
            document.getElementById('exportModal').style.display = 'flex';
        }

        function closeExportModal() {
            document.getElementById('exportModal').style.display = 'none';
        }

        function selectAllResults(select) {
            document.querySelectorAll('.result-checkbox').forEach(cb => cb.checked = select);
        }

        function selectAllHistory(select) {
            document.querySelectorAll('.history-checkbox').forEach(cb => cb.checked = select);
        }

        function confirmExport() {
            const includeHistory = document.getElementById('exportHistory').checked;
            const includeResults = document.getElementById('exportResults').checked;
            const includeProfile = document.getElementById('exportProfile').checked;
            const includeSettings = document.getElementById('exportSettings').checked;
            
            const selectedResults = [];
            if (includeResults) {
                const allResults = JSON.parse(localStorage.getItem('scanResults') || '[]');
                document.querySelectorAll('.result-checkbox:checked').forEach(cb => {
                    const index = parseInt(cb.id.split('_')[1]);
                    selectedResults.push(allResults[index]);
                });
            }
            
            const selectedHistory = [];
            if (includeHistory) {
                const allHistory = JSON.parse(localStorage.getItem('scanHistory') || '[]');
                document.querySelectorAll('.history-checkbox:checked').forEach(cb => {
                    const index = parseInt(cb.id.split('_')[1]);
                    selectedHistory.push(allHistory[index]);
                });
            }
            
            exportData(includeProfile, includeHistory, includeResults, includeSettings, selectedResults, selectedHistory);
            closeExportModal();
        }

        function exportData(includeProfile = true, includeHistory = true, includeResults = true, includeSettings = false, selectedResults = null, selectedHistory = null) {
            const profile = includeProfile ? JSON.parse(localStorage.getItem('userProfile') || '{}') : {};
            const history = selectedHistory || (includeHistory ? JSON.parse(localStorage.getItem('scanHistory') || '[]') : []);
            const results = selectedResults || (includeResults ? JSON.parse(localStorage.getItem('scanResults') || '[]') : []);
            const settings = includeSettings ? JSON.parse(localStorage.getItem('appSettings') || '{}') : {};
            
            // Calculate statistics
            let totalHigh = 0, totalMedium = 0, totalLow = 0;
            results.forEach(r => {
                totalHigh += r.stats.high;
                totalMedium += r.stats.medium;
                totalLow += r.stats.low;
            });
            
            const htmlReport = `
<!DOCTYPE html>
<html>
<head>
    <title>Vulnerability Scanner Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h1 { color: #232946; text-align: center; margin-bottom: 30px; }
        .stats { display: flex; justify-content: space-around; margin: 30px 0; }
        .stat-card { text-align: center; padding: 20px; border-radius: 8px; min-width: 120px; }
        .high { background: #ffebee; border-left: 4px solid #f44336; }
        .medium { background: #fff3e0; border-left: 4px solid #ff9800; }
        .low { background: #e8f5e8; border-left: 4px solid #4caf50; }
        .chart { width: 100%; height: 200px; margin: 20px 0; background: #f9f9f9; border-radius: 8px; position: relative; }
        .bar { position: absolute; bottom: 0; border-radius: 4px 4px 0 0; }
        .result-item { border: 1px solid #ddd; border-radius: 6px; padding: 15px; margin: 10px 0; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f5f5f5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 Vulnerability Scanner Report</h1>
        <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
        ${includeProfile ? `<p><strong>User:</strong> ${profile.name || 'Anonymous'}</p>` : ''}
        <p><strong>Exported Data:</strong> ${['History', 'Results', includeProfile && 'Profile', includeSettings && 'Settings'].filter(Boolean).join(', ')}</p>
        
        <h2>📊 Overall Statistics</h2>
        <div class="stats">
            <div class="stat-card high">
                <h3>${totalHigh}</h3>
                <p>High Risk</p>
            </div>
            <div class="stat-card medium">
                <h3>${totalMedium}</h3>
                <p>Medium Risk</p>
            </div>
            <div class="stat-card low">
                <h3>${totalLow}</h3>
                <p>Low Risk</p>
            </div>
        </div>
        
        <h2>📈 Risk Distribution Chart</h2>
        <div class="chart">
            ${(() => {
                const total = totalHigh + totalMedium + totalLow;
                const maxHeight = Math.max(totalHigh, totalMedium, totalLow) || 1;
                const highPercent = total > 0 ? (totalHigh / maxHeight) * 80 : 0;
                const mediumPercent = total > 0 ? (totalMedium / maxHeight) * 80 : 0;
                const lowPercent = total > 0 ? (totalLow / maxHeight) * 80 : 0;
                return `
                    <div class="bar" style="left:15%;width:20%;height:${highPercent}%;background:#f44336;">
                        <div style="position:absolute;bottom:-25px;left:50%;transform:translateX(-50%);font-size:12px;color:#333;">High</div>
                    </div>
                    <div class="bar" style="left:40%;width:20%;height:${mediumPercent}%;background:#ff9800;">
                        <div style="position:absolute;bottom:-25px;left:50%;transform:translateX(-50%);font-size:12px;color:#333;">Medium</div>
                    </div>
                    <div class="bar" style="left:65%;width:20%;height:${lowPercent}%;background:#4caf50;">
                        <div style="position:absolute;bottom:-25px;left:50%;transform:translateX(-50%);font-size:12px;color:#333;">Low</div>
                    </div>
                `;
            })()} 
        </div>
        
        <h2>🔍 Scan Results</h2>
        ${results.map(result => `
            <div class="result-item">
                <h3>${result.url}</h3>
                <p><strong>Date:</strong> ${result.date}</p>
                <div style="margin:10px 0;">
                    <strong>Vulnerabilities Found:</strong>
                    ${result.vulnerabilities.map(v => `
                        <div style="margin:5px 0;padding:8px;border-radius:4px;border-left:4px solid ${v.level === 'high' ? '#f44336' : v.level === 'medium' ? '#ff9800' : '#4caf50'};background:${v.level === 'high' ? '#ffebee' : v.level === 'medium' ? '#fff3e0' : '#e8f5e8'};">
                            <strong>${v.type}</strong> (${v.level.toUpperCase()}): ${v.description}
                        </div>
                    `).join('')}
                </div>
                <div style="margin-top:15px;">
                    <strong>Risk Summary:</strong> 
                    <span style="color:#f44336;">High: ${result.stats.high}</span> | 
                    <span style="color:#ff9800;">Medium: ${result.stats.medium}</span> | 
                    <span style="color:#4caf50;">Low: ${result.stats.low}</span>
                </div>
            </div>
        `).join('')}
        
        ${includeHistory ? `
        <h2>📋 Scan History</h2>
        <table>
            <tr><th>URL</th><th>Scanned</th></tr>
            ${history.map(url => `<tr><td>${url}</td><td>✓</td></tr>`).join('')}
        </table>` : ''}
        
        ${includeSettings ? `
        <h2>⚙️ Settings</h2>
        <p><strong>Theme:</strong> ${settings.theme || 'Light'}</p>
        <p><strong>Notifications:</strong> ${settings.notifications !== false ? 'Enabled' : 'Disabled'}</p>
        <p><strong>Auto-save:</strong> ${settings.autoSave !== false ? 'Enabled' : 'Disabled'}</p>` : ''}
    </div>
</body>
</html>`;
            
            const blob = new Blob([htmlReport], {type: 'text/html'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'vulnerability-report.html';
            a.click();
            URL.revokeObjectURL(url);
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                localStorage.clear();
                alert('All data has been cleared.');
                closeSettings();
            }
        }

        // Results management
        function showResults() {
            const results = JSON.parse(localStorage.getItem('scanResults') || '[]');
            const resultsContent = document.getElementById('resultsContent');
            
            if (results.length === 0) {
                resultsContent.innerHTML = '<div style="color:#aaa;text-align:center;">No scan results available</div>';
            } else {
                let html = '<div style="margin-bottom:15px;"><button onclick="selectAllResults(true)" style="background:#28a745;margin-right:5px;padding:4px 8px;font-size:0.8rem;">Select All</button><button onclick="selectAllResults(false)" style="background:#6c757d;padding:4px 8px;font-size:0.8rem;">Deselect All</button></div>';
                results.slice(-5).reverse().forEach((result, index) => {
                    const resultIndex = results.length - 1 - index;
                    html += `
                        <div style="border:1px solid #ddd;border-radius:6px;padding:12px;margin:10px 0;position:relative;">
                            <input type="checkbox" id="result_${resultIndex}" class="result-checkbox" checked style="position:absolute;top:12px;left:12px;">
                            <button onclick="deleteResult(${resultIndex})" style="position:absolute;top:8px;right:8px;background:#dc3545;color:#fff;border:none;border-radius:3px;padding:2px 6px;font-size:0.7rem;cursor:pointer;">Delete</button>
                            <h4 style="margin:0 0 10px 30px;color:#232946;">${result.url}</h4>
                            <div style="margin-bottom:10px;margin-left:30px;"><strong>Scan Date:</strong> ${result.date}</div>
                            <div style="margin-bottom:10px;margin-left:30px;"><strong>Vulnerabilities Found:</strong></div>
                            <div style="margin-left:30px;">${result.vulnerabilities.map(v => `<div class="vuln-item vuln-${v.level}">${v.type}: ${v.description}</div>`).join('')}</div>
                            <div style="margin-top:15px;margin-left:30px;"><strong>Risk Distribution:</strong></div>
                            <div style="margin-top:8px;margin-left:30px;">
                                <div class="chart-bar" style="background:#f44336;width:${result.stats.high * 10}%;">High: ${result.stats.high}</div>
                                <div class="chart-bar" style="background:#ff9800;width:${result.stats.medium * 10}%;">Medium: ${result.stats.medium}</div>
                                <div class="chart-bar" style="background:#4caf50;width:${result.stats.low * 10}%;">Low: ${result.stats.low}</div>
                            </div>
                        </div>
                    `;
                });
                resultsContent.innerHTML = html;
            }
            document.getElementById('resultsModal').style.display = 'flex';
        }

        function closeResults() {
            document.getElementById('resultsModal').style.display = 'none';
        }

        function clearAllResults() {
            localStorage.removeItem('scanResults');
            showResults();
        }

        function deleteResult(index) {
            let results = JSON.parse(localStorage.getItem('scanResults') || '[]');
            results.splice(index, 1);
            localStorage.setItem('scanResults', JSON.stringify(results));
            showResults();
        }

        function saveResult(url, scanData = null) {
            if (!scanData) {
                // Generate realistic scan data based on common vulnerabilities
                scanData = {
                    status: 'Status Code: 200',
                    xss: Math.random() > 0.7 ? 'XSS vulnerability detected' : 'No XSS vulnerability found',
                    clickjacking: Math.random() > 0.5 ? 'Vulnerable to clickjacking' : 'Protected from clickjacking',
                    sqli: Math.random() > 0.8 ? 'SQL Injection vulnerability detected' : 'No SQL Injection vulnerability found',
                    auth: Math.random() > 0.6 ? ['Login form found - verify secure authentication', 'Insecure cookie: sessionid'] : ['No authentication issues detected'],
                    misconfig: Math.random() > 0.4 ? ['Server header exposed: Apache/2.4.41', 'Directory listing enabled'] : ['No security misconfigurations found'],
                    headers: {
                        'X-Content-Type-Options': Math.random() > 0.5 ? 'nosniff' : 'Missing',
                        'Content-Security-Policy': Math.random() > 0.7 ? 'default-src self' : 'Missing',
                        'Strict-Transport-Security': Math.random() > 0.6 ? 'max-age=31536000' : 'Missing',
                        'Referrer-Policy': Math.random() > 0.5 ? 'strict-origin' : 'Missing',
                        'Permissions-Policy': 'Missing',
                        'X-XSS-Protection': Math.random() > 0.4 ? '1; mode=block' : 'Missing'
                    }
                };
            }
            
            const vulnerabilities = [];
            let high = 0, medium = 0, low = 0;
            
            // XSS (High Risk)
            if (scanData.xss && scanData.xss.includes('detected')) {
                vulnerabilities.push({ type: 'Cross-Site Scripting (XSS)', level: 'high', description: scanData.xss });
                high++;
            }
            
            // SQL Injection (High Risk)
            if (scanData.sqli && scanData.sqli.includes('detected')) {
                vulnerabilities.push({ type: 'SQL Injection', level: 'high', description: scanData.sqli });
                high++;
            }
            
            // Clickjacking (Medium Risk)
            if (scanData.clickjacking && scanData.clickjacking.includes('Vulnerable')) {
                vulnerabilities.push({ type: 'Clickjacking', level: 'medium', description: scanData.clickjacking });
                medium++;
            }
            
            // Authentication & Session Management (Medium Risk)
            if (scanData.auth && Array.isArray(scanData.auth) && scanData.auth.length > 0 && !scanData.auth[0].includes('No authentication')) {
                scanData.auth.forEach(issue => {
                    const level = issue.includes('Insecure cookie') || issue.includes('HttpOnly') ? 'medium' : 'low';
                    vulnerabilities.push({ type: 'Broken Authentication', level: level, description: issue });
                    if (level === 'medium') medium++; else low++;
                });
            }
            
            // Security Misconfigurations (Low to Medium Risk)
            if (scanData.misconfig && Array.isArray(scanData.misconfig) && scanData.misconfig.length > 0 && !scanData.misconfig[0].includes('No security')) {
                scanData.misconfig.forEach(issue => {
                    const level = issue.includes('Server header') || issue.includes('Directory listing') ? 'medium' : 'low';
                    vulnerabilities.push({ type: 'Security Misconfiguration', level: level, description: issue });
                    if (level === 'medium') medium++; else low++;
                });
            }
            
            // Missing Security Headers (Low Risk)
            if (scanData.headers) {
                Object.entries(scanData.headers).forEach(([header, value]) => {
                    if (value === 'Missing') {
                        vulnerabilities.push({ type: 'Missing Security Headers', level: 'low', description: `${header} header is missing` });
                        low++;
                    }
                });
            }
            
            // Sensitive Data Exposure (if detected)
            if (scanData.status && scanData.status.includes('500')) {
                vulnerabilities.push({ type: 'Sensitive Data Exposure', level: 'medium', description: 'Server error reveals sensitive information' });
                medium++;
            }
            
            // Broken Access Control (simulated)
            if (Math.random() > 0.85) {
                vulnerabilities.push({ type: 'Broken Access Control', level: 'high', description: 'Potential unauthorized access detected' });
                high++;
            }
            
            // Using Components with Known Vulnerabilities (simulated)
            if (scanData.headers && scanData.headers['Server'] && !scanData.headers['Server'].includes('Missing')) {
                vulnerabilities.push({ type: 'Using Components with Known Vulnerabilities', level: 'medium', description: 'Outdated server version detected' });
                medium++;
            }
            
            // Insufficient Logging & Monitoring (simulated)
            if (Math.random() > 0.9) {
                vulnerabilities.push({ type: 'Insufficient Logging & Monitoring', level: 'low', description: 'No security monitoring detected' });
                low++;
            }
            
            const result = {
                url: url,
                date: new Date().toLocaleDateString(),
                vulnerabilities: vulnerabilities,
                stats: { high, medium, low }
            };
            
            let results = JSON.parse(localStorage.getItem('scanResults') || '[]');
            const existingIndex = results.findIndex(r => r.url === url);
            if (existingIndex !== -1) {
                results[existingIndex] = result;
            } else {
                results.push(result);
            }
            localStorage.setItem('scanResults', JSON.stringify(results));
        }

        // History management
        function addToHistory(url) {
            let history = JSON.parse(localStorage.getItem('scanHistory') || '[]');
            if (!history.includes(url)) {
                history.push(url);
                localStorage.setItem('scanHistory', JSON.stringify(history));
            }
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('scanHistory') || '[]');
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<div style="color:#aaa;font-size:0.8rem;">No search history</div>';
                return;
            }
            
            // Add select all buttons
            const selectDiv = document.createElement('div');
            selectDiv.style.marginBottom = '8px';
            selectDiv.innerHTML = '<button onclick="selectAllHistory(true)" style="background:#28a745;margin-right:3px;padding:2px 4px;font-size:0.7rem;">All</button><button onclick="selectAllHistory(false)" style="background:#6c757d;padding:2px 4px;font-size:0.7rem;">None</button>';
            historyList.appendChild(selectDiv);
            
            history.slice(-10).reverse().forEach((url, index) => {
                const historyIndex = history.length - 1 - index;
                const div = document.createElement('div');
                div.className = 'history-item';
                div.style.display = 'flex';
                div.style.alignItems = 'center';
                div.innerHTML = `
                    <input type="checkbox" id="history_${historyIndex}" class="history-checkbox" checked style="margin-right:6px;">
                    <span onclick="document.getElementById('url').value='${url}';document.getElementById('historyDropdown').style.display='none';" style="flex:1;cursor:pointer;">${url}</span>
                    <button onclick="deleteHistory(${historyIndex})" style="background:#dc3545;color:#fff;border:none;border-radius:2px;padding:1px 4px;font-size:0.7rem;cursor:pointer;margin-left:5px;">×</button>
                `;
                historyList.appendChild(div);
            });
        }

        function clearAllHistory() {
            localStorage.removeItem('scanHistory');
            loadHistory();
        }

        function deleteHistory(index) {
            let history = JSON.parse(localStorage.getItem('scanHistory') || '[]');
            history.splice(index, 1);
            localStorage.setItem('scanHistory', JSON.stringify(history));
            loadHistory();
        }

        function toggleHistory() {
            const dropdown = document.getElementById('historyDropdown');
            if (dropdown.style.display === 'block') {
                dropdown.style.display = 'none';
            } else {
                loadHistory();
                dropdown.style.display = 'block';
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('historyDropdown');
            const historyBtn = e.target.closest('button[title="History"]');
            if (!historyBtn && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        // Scanner modal logic
        const scanForm = document.getElementById('scanForm');
        const scannerModal = document.getElementById('scannerModal');
        const scanTimer = document.getElementById('scanTimer');
        let timerInterval = null;
        let startTime = null;

        scanForm.addEventListener('submit', function(e) {
            // Ensure the URL starts with https://
            let urlInput = document.getElementById('url');
            let url = urlInput.value.trim();
            if (!/^https?:\/\//i.test(url)) {
                url = 'https://' + url;
                urlInput.value = url;
            }

            addToHistory(url);
            saveResult(url);

            // Show scanner modal and run timer until page reloads
            scannerModal.style.display = 'flex';
            startTime = Date.now();
            let seconds = 0;
            scanTimer.textContent = '0s';
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                seconds = Math.floor((Date.now() - startTime) / 1000);
                scanTimer.textContent = seconds + 's';
            }, 1000);
        });

        window.addEventListener('pageshow', () => {
            scannerModal.style.display = 'none';
            clearInterval(timerInterval);
        });

        // View toggle functionality
        let isMobileView = false;
        
        function toggleView() {
            const body = document.body;
            const indicator = document.getElementById('viewIndicator');
            const toggleBtn = document.getElementById('viewToggle');
            
            if (!isMobileView) {
                body.classList.add('mobile-view');
                indicator.textContent = '📱 Mobile View';
                toggleBtn.innerHTML = '<svg width="28" height="28" fill="none" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2" stroke="#fff" stroke-width="2"/><line x1="8" y1="21" x2="16" y2="21" stroke="#fff" stroke-width="2"/><line x1="12" y1="17" x2="12" y2="21" stroke="#fff" stroke-width="2"/></svg>';
                isMobileView = true;
            } else {
                body.classList.remove('mobile-view');
                indicator.textContent = '🖥️ Desktop View';
                toggleBtn.innerHTML = '<svg width="28" height="28" fill="none" viewBox="0 0 24 24"><rect x="2" y="4" width="20" height="16" rx="2" stroke="#fff" stroke-width="2"/><rect x="6" y="8" width="12" height="8" rx="1" stroke="#fff" stroke-width="2"/></svg>';
                isMobileView = false;
            }
        }
        
        // Initialize view indicator
        window.addEventListener('DOMContentLoaded', function() {
            const indicator = document.createElement('div');
            indicator.id = 'viewIndicator';
            indicator.className = 'view-indicator';
            indicator.textContent = '🖥️ Desktop View';
            document.body.appendChild(indicator);
        });


    </script>
</body>
</html>